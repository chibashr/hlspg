# General Configuration
FLASK_ENV=development
APP_HOST=0.0.0.0
APP_PORT=3000
SECRET_KEY=change-me-in-production-use-strong-random-key
LOG_LEVEL=INFO
LOG_TO_STDOUT=true
MAINTENANCE_MODE=false

# Database (PostgreSQL)
DATABASE_URL=postgresql://portal:portalpass@postgres:5432/portal

# Redis
REDIS_URL=redis://redis:6379/0
SESSION_TYPE=redis
SESSION_REDIS_URL=redis://redis:6379/0

# LDAP / LDAPS Configuration
LDAP_URL=ldaps://ldap1.chibashr.local:636
LDAP_USE_TLS=true
LDAP_BIND_DN=cn=portal-service,ou=services,dc=chibashr,dc=local
LDAP_BIND_PASSWORD=change-me
LDAP_BASE_DN=dc=chibashr,dc=local
LDAP_USER_FILTER=(|(uid={username})(sAMAccountName={username})(mail={username}))
LDAP_GROUP_ATTRIBUTE=memberOf
LDAP_CA_CERT=/run/secrets/ldap_ca.pem
LDAP_SEARCH_TIMEOUT=5

# Session Configuration
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_SAMESITE=Lax
SESSION_TIMEOUT_MINUTES=120

# Admin Bootstrap
INITIAL_LOCAL_ADMIN_USERNAME=portal-admin
INITIAL_LOCAL_ADMIN_PASSWORD=change-me-on-first-login
ALLOW_LOCAL_FALLBACK=true

# Keycloak (Optional)
KEYCLOAK_URL=
KEYCLOAK_CLIENT_ID=
KEYCLOAK_CLIENT_SECRET=
KEYCLOAK_REALM=

# Rate Limiting
RATE_LIMIT_REQUESTS=10
RATE_LIMIT_PERIOD=60

# Security
ALLOWED_PROXIED_HOSTS=chibashr.local,*.chibashr.local
MAINTAINER_EMAIL=admin@chibashr.local

# Database Migration (optional auto-migration)
DB_AUTO_MIGRATE=false
